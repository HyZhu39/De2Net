# README for Dataset Preparation
We used three different datasets for our work as benchmarks: **ZTE**„ÄÅ**T-OLED** and **P-OLED**.

**ZTE** dataset was proposed by [DISCNet](https://github.com/jnjaby/DISCNet/), and you can see this [link](https://jnjaby.github.io/projects/UDC/) for details. 

**T-OLED** and **P-OLED** datasets were proposed by Microsoft, and used as benchmark in UDC 2020 challenge, you can see this [link](https://rlq-tod.github.io/challenge2.html) for details. 


## Overview
**ZTE**:

| Path  | Files | Format | Description|
| :---- | ----: | :---:  | :---------|
| dataset/UDC_syn_data | | | Main folder|
| &#9500;&#9472;&nbsp; data_scripts | 4 | .py | Python scripts to process downloaded dataset.|
| &#9500;&#9472;&nbsp; synthetic_data |  |  | Synthetic dataset.|
| &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#9492;&#9472;&nbsp; GT |  |  | Reprojected and cropped HDR images at 800&times;800.|
| &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#9500;&#9472;&nbsp; train | 2,016 | .npy | Training split.|
| &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#9492;&#9472;&nbsp; test | 360 | .npy | Test split.|
| &#9500;&#9472;&nbsp; real_data |  |  | Real dataset.|
| &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#9500;&#9472;&nbsp; input | 30 | .npy | Input UDC images at 3264&times;2448, captured by ZTE phone.|
| &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#9500;&#9472;&nbsp; CCM_txt | 30 | .txt | Color correction matrix for each real input image.|
| &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#9492;&#9472;&nbsp; jpg_ZTE | 30 | .jpg | Camera output after built-in ISP.|
| &#9500;&#9472;&nbsp; PSF |  |  | PSF-related files.|
| &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#9500;&#9472;&nbsp; kernel_code | 9 | .npy | Kernel code generated by PCA, `d=5`.|
| &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#9500;&#9472;&nbsp; kernel_info_list |  | .txt | List to specify iamges with corresponding path of PSF. To be generated by a script.|
| &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#9492;&#9472;&nbsp; ZTE_new |  9| .npy | PSFs in various angles, size 800&times;800.|

**T-OLED** and **P-OLED**:

| Path                                                         | Files | Format | Description                                              |
| :----------------------------------------------------------- | ----: | :----: | :------------------------------------------------------- |
| dataset/UDC_real_data                                        |       |        | Main folder                                              |
| &#9500;&#9472;&nbsp; mat                                     |     8 |  .mat  | Packaged UDC images.                                     |
| &#9500;&#9472;&nbsp; Real_data                               |       |        | Unpacked train set for training.                         |
| &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#9492;&#9472;&nbsp; Toled_train |       |        | Training split of **T-OLED** dataset at 1024&times;2048. |
| &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#9500;&#9472;&nbsp; LQ |   240 |  .png  | Low quality UDC images.                                  |
| &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#9492;&#9472;&nbsp; HQ |   240 |  .png  | Ground Truth.                                            |
| &nbsp;&nbsp;&nbsp;&nbsp;&#9492;&#9472;&nbsp; Poled_train     |       |        | Training split of **P-OLED** dataset at 1024&times;2048. |
| &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#9500;&#9472;&nbsp; LQ |   240 |  .png  | Low quality UDC images.                                  |
| &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#9492;&#9472;&nbsp; HQ |   240 |  .png  | Ground Truth.                                            |

## Dataset Preprocess

**ZTE**:

1. Download and unzip datasets into current directory:

    ```bash
    python data_scripts/download_dataset.py --dataset=UDC
    ```

    Alternatively, you can also download the data directly from [GoogleDrive]() or [BaiduDrive](https://pan.baidu.com/s/1Y1rlRlZ-tYKPMuMT3zsSsQ?pwd=D2NT), unzip and put them into `./dataset`.

1. Generating synthetic data by apply convolution with PSF for UDC simulation:

    ```bash
    python data_scripts/data_simulation.py --data_path=. --psf_type=ZTE_new
    ```

2. Generating info list of images together with corresponding PSF:

    ```bash
    python data_scripts/generate_info_list.py --data_path=. --psf_type=ZTE_new --save_dir=./PSF/kernel_info_list
    ```

**T-OLED** and **P-OLED**:

Download and unzip datasets into `./dataset`.



You can download the data directly from [GoogleDrive]() or [BaiduDrive](https://pan.baidu.com/s/1Y1rlRlZ-tYKPMuMT3zsSsQ?pwd=D2NT), unzip and put them into `./dataset`.
